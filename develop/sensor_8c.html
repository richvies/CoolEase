<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CoolEase: sensor/sensor.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CoolEase<span id="projectnumber">&#160;develop-eabc6b5</span>
   </div>
   <div id="projectbrief">Remote Temperature Monitor</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_59f484095bcddb1b5c7cfcc1ba766bc2.html">sensor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sensor.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Sensor Source File.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;libopencm3/cm3/nvic.h&gt;</code><br />
<code>#include &lt;libopencm3/cm3/scb.h&gt;</code><br />
<code>#include &lt;libopencm3/cm3/systick.h&gt;</code><br />
<code>#include &lt;libopencm3/stm32/exti.h&gt;</code><br />
<code>#include &lt;libopencm3/stm32/rtc.h&gt;</code><br />
<code>#include &lt;libopencm3/stm32/syscfg.h&gt;</code><br />
<code>#include &quot;<a class="el" href="aes_8h_source.html">common/aes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="battery_8h_source.html">common/battery.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log_8h_source.html">common/log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="memory_8h_source.html">common/memory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="reset_8h_source.html">common/reset.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rfm_8h_source.html">common/rfm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timers_8h_source.html">common/timers.h</a>&quot;</code><br />
<code>#include &quot;config/board_defs.h&quot;</code><br />
<code>#include &quot;<a class="el" href="sensor_8h_source.html">sensor/sensor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="si7051_8h_source.html">sensor/si7051.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tmp112_8h_source.html">sensor/tmp112.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for sensor.c:</div>
<div class="dyncontent">
<div class="center"><img src="sensor_8c__incl.png" border="0" usemap="#asensor_2sensor_8c" alt=""/></div>
<map name="asensor_2sensor_8c" id="asensor_2sensor_8c">
<area shape="rect" title="Sensor Source File." alt="" coords="1299,5,1421,31"/>
<area shape="rect" title=" " alt="" coords="5,79,179,104"/>
<area shape="poly" title=" " alt="" coords="1299,24,843,41,523,58,193,81,192,76,523,53,843,36,1298,18"/>
<area shape="rect" title=" " alt="" coords="203,79,371,104"/>
<area shape="poly" title=" " alt="" coords="1298,25,917,44,655,60,385,81,384,76,655,55,917,38,1298,19"/>
<area shape="rect" title=" " alt="" coords="395,79,587,104"/>
<area shape="poly" title=" " alt="" coords="1298,26,1002,48,601,81,601,76,1002,43,1298,21"/>
<area shape="rect" title=" " alt="" coords="611,79,795,104"/>
<area shape="poly" title=" " alt="" coords="1299,29,809,81,808,76,1298,23"/>
<area shape="rect" title=" " alt="" coords="819,79,995,104"/>
<area shape="poly" title=" " alt="" coords="1299,32,993,79,992,74,1298,26"/>
<area shape="rect" title=" " alt="" coords="1019,79,1221,104"/>
<area shape="poly" title=" " alt="" coords="1322,33,1173,77,1171,72,1321,28"/>
<area shape="rect" href="aes_8h.html" title="AES Encryption Module Header File." alt="" coords="1303,152,1422,177"/>
<area shape="poly" title=" " alt="" coords="1367,30,1381,78,1381,110,1374,139,1369,138,1376,110,1376,79,1362,32"/>
<area shape="rect" href="battery_8h.html" title="Battery Management Header File." alt="" coords="1654,79,1794,104"/>
<area shape="poly" title=" " alt="" coords="1419,28,1652,73,1651,79,1418,33"/>
<area shape="rect" href="log_8h.html" title="Logging System Header File." alt="" coords="2073,152,2188,177"/>
<area shape="poly" title=" " alt="" coords="1421,17,1595,21,1814,30,1919,38,2010,48,2079,60,2103,68,2118,77,2128,90,2134,106,2136,138,2131,139,2129,107,2123,93,2114,81,2101,73,2078,66,2010,53,1919,43,1814,35,1595,26,1421,23"/>
<area shape="rect" href="memory_8h.html" title="Memory Management Header File." alt="" coords="1650,152,1798,177"/>
<area shape="poly" title=" " alt="" coords="1390,28,1684,145,1682,149,1388,33"/>
<area shape="rect" title=" " alt="" coords="1139,225,1288,251"/>
<area shape="poly" title=" " alt="" coords="1346,33,1289,74,1234,106,1196,117,1161,120,1098,114,1069,113,1041,117,1015,129,989,154,980,171,981,184,992,196,1010,206,1064,221,1125,229,1124,235,1062,226,1008,211,989,200,976,186,974,170,985,150,1012,125,1040,112,1069,107,1098,109,1161,115,1196,112,1232,102,1286,69,1343,29"/>
<area shape="rect" href="reset_8h.html" title="System Reset Management Header File." alt="" coords="1447,152,1575,177"/>
<area shape="poly" title=" " alt="" coords="1374,29,1491,141,1487,144,1370,33"/>
<area shape="rect" href="rfm_8h.html" title="Radio Frequency Module Header File." alt="" coords="2213,152,2331,177"/>
<area shape="poly" title=" " alt="" coords="1421,17,1583,21,1792,31,1996,48,2079,61,2142,76,2173,89,2203,106,2250,141,2247,145,2200,111,2171,94,2140,81,2078,66,1995,54,1791,36,1583,27,1421,23"/>
<area shape="rect" href="timers_8h.html" title="Timing and Power Management Header File." alt="" coords="1966,79,2103,104"/>
<area shape="poly" title=" " alt="" coords="1422,22,1651,44,1953,76,1952,81,1650,49,1421,27"/>
<area shape="rect" href="sensor_8h.html" title="Sensor Module Header File." alt="" coords="1819,79,1941,104"/>
<area shape="poly" title=" " alt="" coords="1422,24,1805,76,1804,81,1421,30"/>
<area shape="rect" href="si7051_8h.html" title="SI7051 Temperature Sensor Driver Header File." alt="" coords="999,152,1123,177"/>
<area shape="poly" title=" " alt="" coords="1354,33,1324,69,1303,89,1279,106,1214,130,1129,152,1128,146,1213,125,1276,102,1299,85,1320,65,1350,29"/>
<area shape="rect" href="tmp112_8h.html" title="TMP112 Temperature Sensor Driver Header File." alt="" coords="1148,152,1279,177"/>
<area shape="poly" title=" " alt="" coords="1361,32,1352,67,1343,87,1330,106,1299,131,1265,149,1262,144,1296,127,1326,102,1338,85,1347,65,1356,30"/>
<area shape="rect" title=" " alt="" coords="1549,225,1619,251"/>
<area shape="poly" title=" " alt="" coords="1399,175,1537,219,1535,224,1397,180"/>
<area shape="poly" title=" " alt="" coords="1704,106,1673,127,1641,154,1617,184,1598,214,1594,212,1612,181,1637,150,1670,122,1702,102"/>
<area shape="rect" title=" " alt="" coords="2231,225,2313,251"/>
<area shape="poly" title=" " alt="" coords="1742,102,1804,143,1862,175,1953,201,2026,210,2101,213,2196,223,2218,226,2217,231,2196,228,2101,219,2026,215,1952,206,1860,180,1802,147,1739,106"/>
<area shape="rect" title=" " alt="" coords="1873,152,1948,177"/>
<area shape="poly" title=" " alt="" coords="1755,102,1868,145,1867,149,1753,107"/>
<area shape="poly" title=" " alt="" coords="1790,101,2060,148,2059,154,1789,107"/>
<area shape="poly" title=" " alt="" coords="1727,104,1727,138,1721,138,1721,104"/>
<area shape="poly" title=" " alt="" coords="2073,177,2055,180,1938,193,1846,201,1752,210,1633,228,1632,223,1752,205,1845,196,1938,188,2054,175,2073,172"/>
<area shape="poly" title=" " alt="" coords="2155,175,2238,217,2236,221,2152,180"/>
<area shape="rect" title=" " alt="" coords="2077,225,2184,251"/>
<area shape="poly" title=" " alt="" coords="2133,178,2133,212,2128,212,2128,178"/>
<area shape="poly" title=" " alt="" coords="1703,180,1620,221,1618,217,1700,175"/>
<area shape="rect" title=" " alt="" coords="1643,225,1834,251"/>
<area shape="poly" title=" " alt="" coords="1729,177,1736,211,1731,212,1724,178"/>
<area shape="rect" title=" " alt="" coords="1859,225,2037,251"/>
<area shape="poly" title=" " alt="" coords="1761,175,1900,219,1898,224,1759,180"/>
<area shape="poly" title=" " alt="" coords="1650,179,1302,227,1301,222,1649,174"/>
<area shape="poly" title=" " alt="" coords="1525,176,1564,214,1560,218,1521,180"/>
<area shape="poly" title=" " alt="" coords="2213,178,2200,180,2043,195,1918,201,1793,208,1633,228,1632,223,1793,203,1918,195,2042,189,2200,175,2212,173"/>
<area shape="poly" title=" " alt="" coords="2275,178,2275,212,2269,212,2269,178"/>
<area shape="poly" title=" " alt="" coords="2033,105,2016,143,2002,163,1983,180,1937,205,1896,219,1856,225,1818,226,1735,222,1688,222,1633,228,1633,223,1688,217,1736,216,1818,220,1856,220,1894,214,1935,200,1980,175,1998,159,2012,140,2029,103"/>
<area shape="poly" title=" " alt="" coords="2104,91,2182,96,2267,106,2342,123,2371,135,2390,150,2397,162,2397,174,2383,194,2357,210,2326,223,2324,218,2355,205,2379,190,2392,172,2391,163,2386,154,2368,140,2341,128,2267,111,2182,101,2103,97"/>
<area shape="poly" title=" " alt="" coords="2016,106,1944,147,1941,143,2013,102"/>
<area shape="poly" title=" " alt="" coords="2052,102,2105,141,2102,146,2049,106"/>
<area shape="poly" title=" " alt="" coords="1985,107,1788,152,1787,146,1984,101"/>
<area shape="poly" title=" " alt="" coords="1906,102,1931,116,1955,135,1968,156,1968,168,1962,179,1938,197,1903,208,1861,215,1814,219,1716,223,1633,228,1633,223,1716,218,1813,214,1860,210,1902,203,1935,192,1958,176,1963,166,1963,157,1951,138,1928,121,1904,106"/>
<area shape="poly" title=" " alt="" coords="1942,100,1955,101,2044,105,2160,105,2218,109,2272,116,2315,129,2333,139,2346,150,2352,160,2353,170,2345,189,2328,206,2307,220,2304,216,2324,202,2340,186,2348,169,2347,161,2342,154,2330,143,2313,134,2270,121,2218,114,2160,111,2044,110,1954,107,1941,105"/>
<area shape="poly" title=" " alt="" coords="1888,103,1903,139,1898,141,1883,105"/>
<area shape="poly" title=" " alt="" coords="1921,101,2078,146,2076,151,1920,107"/>
<area shape="poly" title=" " alt="" coords="1856,106,1763,149,1761,144,1854,102"/>
<area shape="poly" title=" " alt="" coords="1124,173,1136,175,1536,228,1535,233,1136,180,1123,178"/>
<area shape="poly" title=" " alt="" coords="1273,175,1536,225,1535,230,1272,180"/>
</map>
</div>
</div>
<p><a href="sensor_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga1c6d5de492ac61ad29aec7aa9a436bbf" id="r_ga1c6d5de492ac61ad29aec7aa9a436bbf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga1c6d5de492ac61ad29aec7aa9a436bbf">VERSION</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:ga1c6d5de492ac61ad29aec7aa9a436bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2adda68bf98cb74b4f4fd826243c9a5d" id="r_ga2adda68bf98cb74b4f4fd826243c9a5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga2adda68bf98cb74b4f4fd826243c9a5d">SENSOR_SLEEP_TIME</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:ga2adda68bf98cb74b4f4fd826243c9a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga17fb021b480a1f220d2579807fa2e398" id="r_ga17fb021b480a1f220d2579807fa2e398"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga17fb021b480a1f220d2579807fa2e398">init</a> (void)</td></tr>
<tr class="separator:ga17fb021b480a1f220d2579807fa2e398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ec2253d9622cef3d2997ef1fca4b6d7" id="r_ga4ec2253d9622cef3d2997ef1fca4b6d7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga4ec2253d9622cef3d2997ef1fca4b6d7">deinit</a> (void)</td></tr>
<tr class="separator:ga4ec2253d9622cef3d2997ef1fca4b6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f9c00cd4ef25abbb72e0e08e1b6e11d" id="r_ga2f9c00cd4ef25abbb72e0e08e1b6e11d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga2f9c00cd4ef25abbb72e0e08e1b6e11d">sensor</a> (void)</td></tr>
<tr class="separator:ga2f9c00cd4ef25abbb72e0e08e1b6e11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga13eda00dd5efd9440b0eaf5430b73e84" id="r_ga13eda00dd5efd9440b0eaf5430b73e84"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga13eda00dd5efd9440b0eaf5430b73e84">test</a> (void)</td></tr>
<tr class="separator:ga13eda00dd5efd9440b0eaf5430b73e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3020251c539485c2b7782767ae7e029b" id="r_ga3020251c539485c2b7782767ae7e029b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga3020251c539485c2b7782767ae7e029b">send_packet</a> (void)</td></tr>
<tr class="separator:ga3020251c539485c2b7782767ae7e029b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6c4a380346a21474c9ca4ca52dca2d3" id="r_gaa6c4a380346a21474c9ca4ca52dca2d3"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#gaa6c4a380346a21474c9ca4ca52dca2d3">xorshift32</a> (void)</td></tr>
<tr class="separator:gaa6c4a380346a21474c9ca4ca52dca2d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga840291bc02cba5474a4cb46a9b9566fe" id="r_ga840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:ga840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63a4572f5952ee2a550f28890a34ea1a" id="r_ga63a4572f5952ee2a550f28890a34ea1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga63a4572f5952ee2a550f28890a34ea1a">set_gpio_for_standby</a> (void)</td></tr>
<tr class="separator:ga63a4572f5952ee2a550f28890a34ea1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4f18104015de13014524989b16db6c4" id="r_gaa4f18104015de13014524989b16db6c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#gaa4f18104015de13014524989b16db6c4">rtc_isr</a> (void)</td></tr>
<tr class="separator:gaa4f18104015de13014524989b16db6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga88618864238916cc1f77cef97de2f8c7" id="r_ga88618864238916cc1f77cef97de2f8c7"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga88618864238916cc1f77cef97de2f8c7">bad_reboot</a> = false</td></tr>
<tr class="separator:ga88618864238916cc1f77cef97de2f8c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a05d3b2cf84fa43b825c83db84a9255" id="r_ga8a05d3b2cf84fa43b825c83db84a9255"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#ga8a05d3b2cf84fa43b825c83db84a9255">report_pend</a> = true</td></tr>
<tr class="separator:ga8a05d3b2cf84fa43b825c83db84a9255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc86071f8b452ae093f08bf0c626198c" id="r_gabc86071f8b452ae093f08bf0c626198c"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#gabc86071f8b452ae093f08bf0c626198c">report_timer</a> = 0</td></tr>
<tr class="separator:gabc86071f8b452ae093f08bf0c626198c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc9da10dd17acf878cf8e0b6fef72686" id="r_gadc9da10dd17acf878cf8e0b6fef72686"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sensor__api.html#gadc9da10dd17acf878cf8e0b6fef72686">report_wait</a> = 0</td></tr>
<tr class="separator:gadc9da10dd17acf878cf8e0b6fef72686"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Sensor Source File. </p>
<dl class="section author"><dt>Author</dt><dd>Richard Davies </dd></dl>
<dl class="section date"><dt>Date</dt><dd>27/Dec/2020  </dd></dl>

<p class="definition">Definition in file <a class="el" href="sensor_8c_source.html">sensor.c</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 21 2025 10:20:20 for CoolEase by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
